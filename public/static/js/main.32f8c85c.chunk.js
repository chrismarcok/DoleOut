(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{101:function(e,t,a){},131:function(e,t){},134:function(e,t,a){},135:function(e,t,a){},137:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(9),i=a.n(r),o=a(1),c=a(2),l=a(4),m=a(3),p=a(5),u=a(64),d=a(15),h=(a(73),a(74),a(75),a(76),a(77),a(78),a(6)),g=a.n(h),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={user:void 0,loggedIn:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/api/me").then((function(t){e.setState({user:t.data,loggedIn:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"headerbox"},s.a.createElement("a",{href:"/"},s.a.createElement("div",{className:"header-logo"})),s.a.createElement("ul",{className:"header-left-ul"},s.a.createElement("a",{href:"/"},s.a.createElement("li",{className:"header-li"},s.a.createElement("div",{className:"li-content"},"Home ",s.a.createElement("i",{className:"fa fa-home"})))),s.a.createElement("a",{href:"/groups",id:"header-group-link"},s.a.createElement("li",{className:"header-li"},s.a.createElement("div",{className:"li-content"},"Groups ",s.a.createElement("i",{className:"fa fa-users"}))))),s.a.createElement("ul",{className:"header-right-ul"},this.state.loggedIn?s.a.createElement(s.a.Fragment,null,s.a.createElement("a",{href:"/u/"+this.state.user._id,id:"header-profile"},s.a.createElement("li",{className:"header-li"},s.a.createElement("div",{className:"li-content"},s.a.createElement("span",{className:"header-username"},"My Profile")," ",s.a.createElement("i",{className:"fa fa-user"})))),s.a.createElement("a",{href:"/logout",id:"header-logout"},s.a.createElement("li",{className:"header-li"},s.a.createElement("div",{className:"li-content"},s.a.createElement("span",{className:"header-username"},"Logout")," ",s.a.createElement("i",{className:"fa fa-sign-out"}))))):s.a.createElement(s.a.Fragment,null,s.a.createElement("a",{href:"/register",id:"header-register"},s.a.createElement("li",{className:"header-li"},s.a.createElement("div",{className:"li-content"},"Register ",s.a.createElement("i",{className:"fa fa-user-plus"})))),s.a.createElement("a",{href:"/login",id:"header-login"},s.a.createElement("li",{className:"header-li"},s.a.createElement("div",{className:"li-content"},"Login ",s.a.createElement("i",{className:"fa fa-sign-in"}))))))))}}]),t}(s.a.Component),f=a(7),b=a(22),v={handleInputChange:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(b.a)({},n,a))}},E=a(95),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={name:a.props.name,hover:!1,editHover:!1,deleteHover:!1,members:[],loading:!0,canEdit:!1},a.hoverOn=a.hoverOn.bind(Object(f.a)(a)),a.hoverOff=a.hoverOff.bind(Object(f.a)(a)),a.hide=a.hide.bind(Object(f.a)(a)),a.edit=a.edit.bind(Object(f.a)(a)),a.confirm=a.confirm.bind(Object(f.a)(a)),a.redirect=a.redirect.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.querySelector("#icon"+this.props.id).className="group-icon fa fa-"+this.props.icon,document.querySelector(".group-div-id-"+this.props.id).style.backgroundColor=this.props.colorBg,E(this.props.colorBg).isDark()?document.querySelector(".group-div-id-"+this.props.id).style.color="white":document.querySelector(".group-div-id-"+this.props.id).style.color="black";for(var t=[],a=0;a<this.props.members.length;a++)t.push(g.a.get("/api/u/"+this.props.members[a]));Promise.all(t).then((function(t){var a=[];t.forEach((function(e){a.push(e.data.displayName)})),e.setState({members:a,loading:!1})})).catch((function(e){return console.log(e)})),g.a.get("/api/me").then((function(t){var a=t.data;(e.props.superusers.includes(a._id)||a.isAdmin)&&e.setState({canEdit:!0})})).catch((function(e){console.log(e)}))}},{key:"stringifyMembers",value:function(e){if(0===e.length)return"No members.";for(var t="",a=0;a<e.length;a++)t+=e[a]+", ";return t.substring(0,t.length-2)}},{key:"hoverOn",value:function(){var e=document.querySelector(".group-div-id-"+this.props.id);E(this.props.colorBg).isDark()?e.style.backgroundColor=E(this.props.colorBg).lighten(.1).hsl().string():e.style.backgroundColor=E(this.props.colorBg).darken(.1).hsl().string(),this.setState({hover:!0})}},{key:"hoverOff",value:function(){document.querySelector(".group-div-id-"+this.props.id).style.backgroundColor=this.props.colorBg,this.setState({hover:!1})}},{key:"redirect",value:function(e){e.target.classList.contains("fa")||e.target.classList.contains("group-comp-input")||(this.props.admin?window.location="/g/"+this.props.id+"/admin":window.location="/g/"+this.props.id)}},{key:"hide",value:function(){document.querySelector(".group-div-id-"+this.props.id).style.display="none",g.a.delete("/g/".concat(this.props.id)).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"edit",value:function(){document.querySelector("#group-name-id-"+this.props.id).style.display="none",document.querySelector("#group-comp-input-id-"+this.props.id).style.display="inline-block";var e=document.querySelector("#group-i-edit-"+this.props.id);e.style.display="none",document.querySelector("#group-i-check-"+this.props.id).style.display="inline-block"}},{key:"confirm",value:function(){document.querySelector("#group-name-id-"+this.props.id).style.display="inline-block";var e=document.querySelector("#group-comp-input-id-"+this.props.id);e.style.display="none",this.setState({name:e.value}),document.querySelector("#group-i-edit-"+this.props.id).style.display="inline-block",document.querySelector("#group-i-check-"+this.props.id).style.display="none",g.a.patch("/g/".concat(this.props.id),JSON.stringify({name:e.value,memberIDs:this.props.members}),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"group-div group-div-id-"+this.props.id,onMouseEnter:this.hoverOn,onMouseLeave:this.hoverOff,onClick:this.redirect},s.a.createElement("h1",{className:"grouppage-title"},s.a.createElement("i",{id:"icon"+this.props.id})," ",s.a.createElement("span",{className:"group-name",id:"group-name-id-"+this.props.id},this.state.name)," ",s.a.createElement("input",{className:"group-comp-input",id:"group-comp-input-id-"+this.props.id,type:"text",name:"title",defaultValue:this.state.name,onChange:v.handleInputChange.bind(this)})),this.state.canEdit?s.a.createElement("div",{className:"group-div-change-btns"},s.a.createElement("i",{className:"fa fa-check",id:"group-i-check-"+this.props.id,style:{display:"none"},onClick:this.confirm}),s.a.createElement("i",{className:"fa fa-edit",id:"group-i-edit-"+this.props.id,onClick:this.edit}),s.a.createElement("i",{className:"fa fa-trash",id:"group-i-trash-"+this.props.id,onClick:this.hide})):null,s.a.createElement("h3",null,"Members: ",this.state.loading?s.a.createElement("span",null,"Loading..."):this.stringifyMembers(this.state.members)))}}]),t}(s.a.Component),w=(a(101),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={loading:!1,indicator:"?"},a.checkValid=a.checkValid.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"checkValid",value:function(e){var t=this;this.setState({loading:!0});var a=document.querySelector("#groupMembersInput-"+e).value,n=document.querySelector(".new-member-confirmation-"+e);if(0===a.length)return this.setState({indicator:"?",loading:!1}),void(n.style.color="black");"expense"!==this.props.type?g.a.get("/api/exists/"+a).then((function(e){200===e.status&&(t.setState({indicator:"valid"}),n.style.color="green")})).catch((function(e){console.log(e),t.setState({indicator:"invalid"}),n.style.color="red"})).finally((function(){t.setState({loading:!1})})):this.expenseCheckValid(a,n)}},{key:"expenseCheckValid",value:function(e,t){var a=this;g.a.get("/api/membersOf/".concat(this.props.groupID)).then((function(n){if(1!==n.data.filter((function(t){return t.displayName===e})).length)throw new Error("No user exists with that name in this group");a.setState({indicator:"valid"}),t.style.color="green"})).catch((function(e){console.log(e),a.setState({indicator:"invalid"}),t.style.color="red"})).finally((function(){a.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.props.num-1;return s.a.createElement("div",{className:"new-group-member-row new-group-member-row-"+t},s.a.createElement("p",null,"Member ",this.props.num),s.a.createElement("input",{className:"group-member-input-field",id:"groupMembersInput-"+t,type:"text",name:"groupMembers",placeholder:"Enter Username",maxLength:"20",onChange:function(){return e.checkValid(t)}}),s.a.createElement("div",{className:"new-member-confirmation new-member-confirmation-"+t},this.state.loading?"loading...":this.state.indicator),s.a.createElement("span",{className:"new-member-row-btn",onClick:this.props.newRow}," New Row "))}}]),t}(s.a.Component)),k=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"icon-container",id:"icon-choice-"+this.props.iconName},s.a.createElement("i",{className:"fa fa-"+this.props.iconName}))}}]),t}(s.a.Component),x=a(18),O=a(102),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={users:void 0,title:"",groupIcon:"",groupMembers:"",groupColor:"#eee",pickerOpen:!1,selectColorTxt:"Select Color",iconLst:["user","user-secret","user-md","user-circle","blind","child","male","female","wheelchair","mouse-pointer"],icon:void 0,numMembers:1},a.selectColor=a.selectColor.bind(Object(f.a)(a)),a.newRow=a.newRow.bind(Object(f.a)(a)),a.getMembers=a.getMembers.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/api/users").then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)})),O.from(".picker").on("change",(function(t,a){document.querySelector(".color-preview").style.backgroundColor=a,e.setState({groupColor:String(a)})}))}},{key:"selectColor",value:function(e){e.preventDefault(),this.state.pickerOpen?(document.querySelector(".picker").style.display="none",this.setState({pickerOpen:!1,selectColorTxt:"Select Color"})):(document.querySelector(".picker").style.display="block",this.setState({pickerOpen:!0,selectColorTxt:"Confirm Color"}))}},{key:"getMembers",value:function(e){for(var t=document.querySelectorAll(".group-member-input-field"),a=this.state.users,n=this.state.numMembers,s=[e],r=function(e){var n=a.filter((function(a){return a.displayName===t[e].value}));if(0===n.length||s.includes(n[0]._id))return"continue";s.push(n[0]._id)},i=0;i<n;i++)r(i);return s}},{key:"selectIcon",value:function(e){if(""!==this.state.groupIcon){var t=this.state.groupIcon;document.querySelector("#icon-choice-"+t).className="icon-container"}this.setState({groupIcon:e}),document.querySelector("#icon-choice-"+e).className="icon-container icon-selected"}},{key:"close",value:function(e,t){"popup-close-btn"===e.target.className&&t()}},{key:"createGroup",value:function(){var e=this;""!==this.state.title&&""!==this.state.groupIcon?g.a.get("/api/me").then((function(t){if(200===t.status){var a={name:e.state.title,icon:e.state.groupIcon,colorBg:e.state.groupColor,members:e.getMembers(t.data._id),superusers:[t.data._id]};console.log("Making POST req"),g.a.post("/groups",JSON.stringify(a),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(t){console.log("posted group!"),a._id=t.data,e.props.addGroup(a)})).catch((function(e){console.log("err posting group")})),e.props.closePopup()}else console.log("there is nobody logged in. nothing happened")})).catch((function(e){return console.log(e)})):alert("Please fill out all fields!")}},{key:"newRow",value:function(){var e=document.createElement("div");e.className="new-group-member-row-"+this.state.numMembers,document.querySelector(".new-group-members-container").appendChild(e),i.a.render(s.a.createElement(w,{newRow:this.newRow,num:this.state.numMembers+1,type:"group"}),document.querySelector(".new-group-member-row-"+this.state.numMembers)),this.setState({numMembers:this.state.numMembers+1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"popup",id:"new_group_popup"},s.a.createElement("div",{className:"popup_inner"},s.a.createElement("h1",null,"Create New Group"),s.a.createElement("form",{className:"new-group-form"},s.a.createElement("h3",null," Group Title "),s.a.createElement("input",{id:"groupTitleInput",type:"text",name:"title",placeholder:"Title",onChange:v.handleInputChange.bind(this)}),s.a.createElement("h3",null," Members "),s.a.createElement("div",{className:"new-group-members-container"},s.a.createElement(w,{newRow:this.newRow,num:1,type:"group"})),s.a.createElement("h3",null," Color ",s.a.createElement("div",{className:"color-preview"})," "),s.a.createElement("button",{onClick:this.selectColor},this.state.selectColorTxt),s.a.createElement("div",{className:"picker","acp-show-hex":"no","acp-show-rgb":"no","acp-show-hsl":"no","acp-palette":"PALETTE_MATERIAL_CHROME"}),s.a.createElement("h3",null," Icon "),this.state.iconLst.map((function(t){return s.a.createElement("span",{onClick:function(){return e.selectIcon(t)},key:Object(x.a)(t)},s.a.createElement(k,{iconName:t}))}))),s.a.createElement("div",{className:"popup-btn-container"},s.a.createElement("button",{className:"popup-create-btn",onClick:function(){return e.createGroup()}}," Create Group ",s.a.createElement("i",{className:"fa fa-users"})),s.a.createElement("button",{className:"popup-close-btn",onClick:function(t){return e.close(t,e.props.closePopup)}}," Close"))))}}]),t}(s.a.Component),j=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"loader-container"},s.a.createElement("div",{className:"loader-inner"},s.a.createElement("div",{className:"a",style:{"--n":5}},s.a.createElement("div",{className:"dot",style:{"--i":0}}),s.a.createElement("div",{className:"dot",style:{"--i":1}}),s.a.createElement("div",{className:"dot",style:{"--i":2}}),s.a.createElement("div",{className:"dot",style:{"--i":3}}),s.a.createElement("div",{className:"dot",style:{"--i":4}}))))}}]),t}(s.a.Component),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).createGroup=function(e){var t=document.createElement("div");t.className="new-group-"+e._id,document.querySelector(".new-groups-div").appendChild(t),i.a.render(s.a.createElement(N,{key:e._id,name:e.name,icon:e.icon,colorBg:e.colorBg,id:e._id,members:e.members,superusers:e.superusers}),document.querySelector(".new-group-"+e._id))},a.state={groups:[],showPopup:!1,axiosError:"",loading:!0},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/api/me").then((function(e){if(200===e.status)return g.a.get("/api/groups");throw new Error("No user is logged in")})).then((function(t){var a=t.data;e.setState({groups:a,loading:!1})})).catch((function(t){console.log(t),e.setState({axiosError:"Could not retreive data.",loading:!1})}))}},{key:"openPopup",value:function(){!1===this.state.showPopup&&this.setState({showPopup:!0})}},{key:"closePopup",value:function(){!0===this.state.showPopup&&this.setState({showPopup:!1})}},{key:"render",value:function(){var e=this.state,t=e.groups,a=e.axiosError,n=e.loading;return t=t.filter((function(e){return!1===e.deleted})),s.a.createElement(s.a.Fragment,null,s.a.createElement(y,{user:"user"}),s.a.createElement("ul",{className:"group-ul"},n?s.a.createElement(j,null):null,"object"===typeof t&&t.length>0&&!a?t.map((function(e){return s.a.createElement(N,{key:e._id,name:e.name,icon:e.icon,colorBg:e.color,id:e._id,members:e.memberIDs,superusers:e.superusers})})):null,"object"!==typeof t||0!==t.length||a||n?null:s.a.createElement("div",{className:"loading-txt"},"You are not in any groups!"),a?s.a.createElement("div",{className:"loading-txt"},a):null,s.a.createElement("div",{className:"new-groups-div"}," "),s.a.createElement("div",{className:"group-div"},s.a.createElement("div",{className:"group-add-btn",onClick:this.openPopup.bind(this)},s.a.createElement("div",{className:"group-add-icon-container"},s.a.createElement("i",{className:"fa fa-plus"}),this.state.showPopup?s.a.createElement(C,{addGroup:this.createGroup,closePopup:this.closePopup.bind(this)}):null)))))}}]),t}(s.a.Component),S=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"footer-banner"},"Team 53, for CSC309 Fall 2019. Christopher Marcok, Lance Oribello, David Choi.")}}]),t}(s.a.Component),_=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=document.createElement("script");e.src="./script/canvas.js",e.async=!0,document.body.appendChild(e)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(y,null),s.a.createElement("div",{className:"jumbotron"},s.a.createElement("canvas",{id:"canvas"})),s.a.createElement("div",{className:"above-jumbo"},s.a.createElement("h1",{className:"landing-main-txt"},s.a.createElement("span",{className:"main-header"}," DoleOut "))),s.a.createElement(S,null))}}]),t}(s.a.Component),I=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"login-hdr"},s.a.createElement("h1",null,s.a.createElement("span",{className:"login-span"}," ",this.props.title," "))))}}]),t}(s.a.Component),q=RegExp("^([a-zA-Z0-9 _-]+)$"),P=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={username:"",password:"",rePassword:"",users:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"checkRegistered",value:function(e){return!1}},{key:"register",value:function(e){13!==e.keyCode&&"register-btn"!==e.target.className||(""===this.state.username?(alert("your username should have at least one character"),e.preventDefault()):q.test(this.state.username)?this.state.password.length<=3?(alert("your password should have more than 3 characters"),e.preventDefault()):this.state.password!==this.state.rePassword?(alert("the passwords don't match"),e.preventDefault()):this.checkRegistered(this.state.username)?(alert(this.state.username+" is already registered"),e.preventDefault()):console.log("Posting..."):(alert("your username should match /^([a-zA-Z0-9 _-]+)$/"),e.preventDefault()))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(y,null),s.a.createElement("div",{className:"login-container"},s.a.createElement("div",{className:"login-inner"},s.a.createElement(I,{title:"Register"}),s.a.createElement("form",{className:"login-form",action:"/register",method:"post"},s.a.createElement("h3",null,"Username"),s.a.createElement("input",{id:"register-username",type:"text",required:!0,name:"username",placeholder:"Username",onChange:v.handleInputChange.bind(this),onKeyDown:function(t){return e.register(t)}}),s.a.createElement("h3",null,"Password"),s.a.createElement("input",{id:"register-password",type:"password",required:!0,name:"password",placeholder:"Password",onChange:v.handleInputChange.bind(this),onKeyDown:function(t){return e.register(t)}}),s.a.createElement("h3",null,"Confirm Password"),s.a.createElement("input",{id:"register-repassword",type:"password",required:!0,name:"rePassword",placeholder:"Password",onChange:v.handleInputChange.bind(this),onKeyDown:function(t){return e.register(t)}}),s.a.createElement("button",{className:"register-btn",type:"submit",onClick:function(t){e.register(t)}},"Register ",s.a.createElement("i",{className:"fa fa-user-plus"}))))))}}]),t}(s.a.Component),L=a(61),U=a(62),F=a(63),D={fetchGroups:function(){return U},fetchUsers:function(){return L},fetchGroupMsgs:function(){return F}},T=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={username:"",password:"",users:D.fetchUsers()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"login",value:function(e){13!==e.keyCode&&"login-btn"!==e.target.className||console.log("attempting to post...")}},{key:"getUserPassword",value:function(e){return this.state.users.filter((function(t){return t.username===e}))[0].password}},{key:"checkRegistered",value:function(e){return this.state.users.filter((function(t){return t.username===e})).length>0}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(y,null),s.a.createElement("div",{className:"login-container"},s.a.createElement("div",{className:"login-inner"},s.a.createElement(I,{title:"Login"}),s.a.createElement("form",{className:"login-form",action:"/login",method:"post"},s.a.createElement("h3",null,"Username"),s.a.createElement("input",{id:"login-username",type:"text",name:"username",placeholder:"Username",onChange:v.handleInputChange.bind(this),onKeyDown:function(t){return e.login(t)}}),s.a.createElement("h3",null,"Password"),s.a.createElement("input",{id:"login-password",type:"password",name:"password",placeholder:"Password",onChange:v.handleInputChange.bind(this),onKeyDown:function(t){return e.login(t)}}),s.a.createElement("button",{className:"login-btn",type:"submit",onClick:function(t){return e.login(t)}},"Login ",s.a.createElement("i",{className:"fa fa-sign-in"}))))))}}]),t}(s.a.Component),R=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".expense-small-pic-id-"+this.props.msg.creatorID+"-"+this.props.msg._id).style.backgroundImage="url('"+this.props.avatarURL+"')"}},{key:"render",value:function(){return s.a.createElement("div",{className:"expense-small expense-small-id-"+this.props.msg._id},s.a.createElement("div",{className:"expense-small-pic-and-title"},s.a.createElement("div",{className:"expense-small-pic expense-small-pic-id-"+this.props.msg.creatorID+"-"+this.props.msg._id}),s.a.createElement("b",null,this.props.msg.expense.title)),s.a.createElement("p",null,"$",Number(this.props.msg.expense.totalRemaining).toFixed(2)," remaining"))}}]),t}(s.a.Component),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={complete:a.props.member.complete},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.querySelector(".expense-pic-id-"+this.props.member._id+"-"+this.props.id).style.backgroundImage="url('"+this.props.member.avatarURL+"')"}},{key:"redirect",value:function(){window.location="/u/"+this.props.member._id}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"expense-pic-small-container"},this.state.complete?s.a.createElement("div",{className:"expense-pic-cover expense-pic-cover-id-"+this.props.member._id+"-"+this.props.id,onClick:function(){return e.redirect()}}):null,s.a.createElement("div",{className:"expense-pic-small expense-pic-id-"+this.props.member._id+"-"+this.props.id,onClick:function(){return e.redirect()}}))}}]),t}(s.a.Component),A=a(23),B=a.n(A),V=B()("http://localhost:5000"),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={totalPaid:a.props.msg.isMsg?void 0:a.props.msg.expense.totalPaid,user:a.props.user,currentUserId:1,currentlyPaying:!1,payAmount:"0.01",expenseRemaining:a.props.msg.isMsg?void 0:Number(a.props.msg.expense.totalRemaining).toFixed(2),youOwe:a.props.msg.isMsg?123:a.getYouOwe()},a.toggleExpense=a.toggleExpense.bind(Object(f.a)(a)),a.handleInput=a.handleInput.bind(Object(f.a)(a)),a.deductPayment=a.deductPayment.bind(Object(f.a)(a)),a.delete=a.delete.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getYouOwe",value:function(){var e=this,t=this.props.msg.expense.members.filter((function(t){return t._id===e.props.user._id}));if(1!==t.length)return 0;var a=t[0];return a.complete?0:Number(a.totalToPay-a.amountPaid).toFixed(2)}},{key:"componentDidMount",value:function(){document.querySelector("#group-main-profile-pic-id-"+this.props.msg._id).style.backgroundImage="url('"+this.props.creator.avatarURL+"')",!1===this.props.admin&&(document.querySelector(".expense-delete-container-"+this.props.msg._id).style.display="none")}},{key:"redirect",value:function(){window.location="/u/"+this.state.user._id}},{key:"toggleExpense",value:function(){this.state.currentlyPaying?(this.setState({currentlyPaying:!1}),document.querySelector(".expense-close-btn"+this.props.msg._id).style.display="none",document.querySelector(".expense-pay-btn"+this.props.msg._id).style.display="block",document.querySelector(".expense-payment-container"+this.props.msg._id).style.display="none"):(this.setState({currentlyPaying:!0}),document.querySelector(".expense-pay-btn"+this.props.msg._id).style.display="none",document.querySelector(".expense-close-btn"+this.props.msg._id).style.display="block",document.querySelector(".expense-payment-container"+this.props.msg._id).style.display="block")}},{key:"handleInput",value:function(){this.setState({payAmount:document.querySelector("#paymentInput"+this.props.msg.id).value})}},{key:"deductPayment",value:function(){if(Number(this.state.payAmount)<0)alert("Cannot pay a negative amount");else{var e=this.state.expenseRemaining-Number(this.state.payAmount),t=parseFloat(Math.round(100*e)/100).toFixed(2);if(t<.01){t=Number(0).toFixed(2);var a=document.querySelector(".expense-close-btn"+this.props.msg.id),n=document.querySelector(".expense-payment-container"+this.props.msg.id);a.style.display="none",n.style.display="none",this.props.hideExpense(this.props.msg.id),document.querySelector(".expense-cover-"+this.props.msg.id).style.display="block"}var s=Number(this.state.youOwe-Number(this.state.payAmount)).toFixed(2);s<0&&(s=Number(0).toFixed(2),alert("You paid more than required. The max amount has been paid instead.")),this.setState({expenseRemaining:t,youOwe:s}),s<.01&&(document.querySelector(".you-owe-txt-"+this.props.msg.id).style.color="#00C853",document.querySelector(".expense-pic-cover-id-"+this.state.currentUserId+"-"+this.props.msg.expense.id).style.display="block"),(0,this.props.update)(this.props.msg.id,t)}}},{key:"timeConverter",value:function(e){var t=new Date(e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+n+" "+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{key:"delete",value:function(){var e=this;document.querySelector(".msg-id-"+this.props.msg._id).style.display="none",this.props.msg.isMsg||(document.querySelector(".expense-small-id-"+this.props.msg._id).style.display="none"),g.a.delete("/g/".concat(this.props.msg.groupID,"/msg/").concat(this.props.msg._id)).then((function(t){console.log(t),V.emit("delete-msg",{message:e.props.msg,requestor:e.props.user})})).then((function(e){return console.log(e)}))}},{key:"getMsg",value:function(){var e=this;return s.a.createElement("div",{className:"msg-id-"+this.props.msg._id},s.a.createElement("div",{className:"group-main-msg"},s.a.createElement("div",{className:"group-main-msg-profile-pic",id:"group-main-profile-pic-id-"+this.props.msg._id,onClick:function(){return e.redirect()}}),s.a.createElement("div",{className:"expense-delete-container expense-delete-container-"+this.props.msg._id,onClick:this.delete},s.a.createElement("i",{className:"fa fa-trash"})),s.a.createElement("div",{className:"group-main-msg-content"},s.a.createElement("strong",null,this.props.creator.displayName)," ",s.a.createElement("span",{className:"date-span"},this.timeConverter(this.props.msg.date))," ",s.a.createElement("br",null),this.props.msg.content)))}},{key:"getExpense",value:function(){var e=this;return s.a.createElement("div",{className:"msg-id-"+this.props.msg._id},s.a.createElement("div",{className:"group-expense-msg-container"},s.a.createElement("div",{className:"group-main-msg-profile-pic",id:"group-main-profile-pic-id-"+this.props.msg._id,onClick:function(){return e.redirect()}}),s.a.createElement("div",{className:"expense-delete-container expense-delete-container-"+this.props.msg._id,onClick:this.delete},s.a.createElement("i",{className:"fa fa-trash"})),s.a.createElement("b",null,this.props.creator.displayName)," created a new expense for $",this.props.msg.expense.cost,": ",s.a.createElement("span",{className:"date-span"},this.timeConverter(this.props.msg.date)),s.a.createElement("div",{className:"group-main-msg-content"},s.a.createElement("div",{className:"expense-container"},this.state.totalPaid?s.a.createElement("div",{className:"expense-cover expense-cover-"+this.props.msg._id}):null,s.a.createElement("div",{className:"expense-upper"},s.a.createElement("div",{className:"expense-upper-left"},s.a.createElement("h3",null,this.props.msg.expense.title),s.a.createElement("p",null,s.a.createElement("i",null,'"',this.props.msg.content,'"')),s.a.createElement("div",{className:"you-owe-container-id-"+this.props.msg._id},s.a.createElement("p",{className:"you-owe-title"},"You Owe:"),s.a.createElement("p",{className:"you-owe-txt you-owe-txt-"+this.props.msg._id},"$",this.state.youOwe))),s.a.createElement("div",{className:"expense-upper-right"},s.a.createElement("div",{className:"expense-total-remaining-title"},"Total Remaining:"),s.a.createElement("div",{className:"expense-remaining expense-remaining-"+this.props.msg._id},"$",this.state.expenseRemaining))),s.a.createElement("div",{className:"expense-lower"},s.a.createElement("div",{className:"expense-faces"},this.props.msg.expense.members.map((function(t){return s.a.createElement(G,{key:t._id,member:t,id:e.props.msg._id})}))),s.a.createElement("div",{className:"expense-pay"},this.state.totalPaid||0===this.state.youOwe?null:s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"expense-pay-btn expense-pay-btn"+this.props.msg._id,onClick:this.toggleExpense},"PAY"),s.a.createElement("div",{className:"expense-close-btn expense-close-btn"+this.props.msg._id,onClick:this.toggleExpense},"CLOSE"))))),s.a.createElement("div",{className:"expense-payment-container expense-payment-container"+this.props.msg._id},s.a.createElement("h3",null,"How much would you like to pay?"),s.a.createElement("input",{id:"paymentInput"+this.props.msg._id,type:"number",min:"0.01",max:String(this.props.msg.expense.totalRemaining),step:"0.01",defaultValue:"0.01",onChange:this.handleInput}),s.a.createElement("i",{className:"fa fa-check",id:"expense-make-payment-btn",onClick:this.deductPayment})))))}},{key:"render",value:function(){return this.props.msg.isMsg?this.getMsg():this.getExpense()}}]),t}(s.a.Component),H=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).clickEvent=a.clickEvent.bind(Object(f.a)(a)),a.delete=a.delete.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.querySelector("#groupmember-pic-"+this.props.member._id).style.backgroundImage="url('"+this.props.member.avatarURL+"')",!1===this.props.admin&&(document.querySelector(".groupmember-delete-"+this.props.member._id).style.display="none")}},{key:"clickEvent",value:function(e){e.target.classList.contains("groupmember-delete")||"fa fa-trash"===e.target.className||(window.location.href="/u/"+this.props.member._id)}},{key:"delete",value:function(){var e=this;g.a.delete("/g/".concat(this.props.group._id,"/user/").concat(this.props.member._id)).then((function(t){console.log(t);try{var a=document.querySelector(".group-member-"+e.props.member._id);a.parentNode.removeChild(a)}catch(s){}try{var n=document.querySelector(".groupmember-id-"+e.props.member._id);n.parentNode.removeChild(n)}catch(s){}})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e="black";return this.props.member.isAdmin?e="red":this.props.isSuper&&(e="orange"),s.a.createElement("div",{onClick:this.clickEvent},s.a.createElement("div",{className:"groupmember groupmember-id-"+this.props.member._id},s.a.createElement("div",{className:"groupmember-pic",id:"groupmember-pic-"+this.props.member._id}),s.a.createElement("h3",{className:"groupmember-name",style:{color:e}},this.props.member.displayName),s.a.createElement("div",{className:"groupmember-delete groupmember-delete-"+this.props.member._id,onClick:this.delete},s.a.createElement("i",{className:"fa fa-trash"}))))}}]),t}(s.a.Component),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).redirect=a.redirect.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"redirect",value:function(){window.location="/g/"+this.props.group._id}},{key:"render",value:function(){return s.a.createElement("div",{className:"other-group-container",onClick:this.redirect},this.props.group.name)}}]),t}(s.a.Component);a(134);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).createExpense=function(){var e=a.getMembers();if(""!==a.state.expenseTitle&&""!==a.state.expenseCost&&""!==a.state.expenseContent&&1!==e.length)if(a.state.expenseCost<=0)alert("please enter a positive cost");else{var t={groupID:a.state.thisGroup._id,isMsg:!1,creatorID:a.state.user._id,content:a.state.expenseContent,expense:{title:a.state.expenseTitle,cost:Number(a.state.expenseCost).toFixed(2),totalRemaining:Number(a.state.expenseCost).toFixed(2)-a.state.expenseCost/e.length,totalPaid:!1,members:e}};a.props.addExpense(t),a.props.closePopup()}else alert("one or more fields is missing!")},a.state={expenseTitle:"",expenseContent:"",expenseCost:"",expenseMembers:"",numMembers:1,thisGroup:a.props.group,user:a.props.user},a.createNewMemberRow=a.createNewMemberRow.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getMembers",value:function(){for(var e=this,t=document.querySelectorAll(".group-member-input-field"),a=this.props.groupMembers,n=this.state.numMembers,s=[K({},this.state.user,{amountPaid:0,totalToPay:0,complete:!0})],r=[this.props.user._id],i=function(e){var n=a.filter((function(a){return a.displayName===t[e].value}));if(0===n.length||r.includes(n[0]._id))return"continue";var i=K({},n[0],{amountPaid:0,totalToPay:0,complete:!1});s.push(i),r.push(i._id)},o=0;o<n;o++)i(o);return s.forEach((function(t){t.totalToPay=Number(Number(e.state.expenseCost)/s.length).toFixed(2)})),s[0].totalToPay=0,s[0].amountPaid=Number(Number(this.state.expenseCost)/s.length).toFixed(2),s}},{key:"formatCost",value:function(){var e=document.querySelector("#expenseCostInput"),t=document.querySelector("#expenseCostInput").value;e.value=Number(t).toFixed(2),Number(t)<0&&(e.value=Number(0).toFixed(2))}},{key:"close",value:function(e,t){"popup"!==e.target.className&&"popup-close-btn"!==e.target.className||t()}},{key:"createNewMemberRow",value:function(){var e=document.createElement("div");e.className="new-member-expense-popup-id-"+this.state.numMembers,document.querySelector(".newGroupMemberRow-spawn-here").appendChild(e),i.a.render(s.a.createElement(w,{newRow:this.createNewMemberRow,num:this.state.numMembers+1,type:"expense",groupID:this.state.thisGroup._id}),document.querySelector(".new-member-expense-popup-id-"+this.state.numMembers)),this.setState({numMembers:this.state.numMembers+1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"popup",onPointerDown:function(t){return e.close(t,e.props.closePopup)}},s.a.createElement("div",{className:"popup_inner"},s.a.createElement("h1",null,"New Expense"),s.a.createElement("form",{className:"new-expense-form"},s.a.createElement("h3",null,"Expense Title"),s.a.createElement("input",{className:"new-expense-form-input",id:"expenseTitleInput",type:"text",name:"expenseTitle",placeholder:"Title",onChange:v.handleInputChange.bind(this)}),s.a.createElement("h3",null,"Content"),s.a.createElement("input",{className:"new-expense-form-input",id:"expenseContentInput",type:"text",name:"expenseContent",placeholder:"A Message About Your Expense",onChange:v.handleInputChange.bind(this)}),s.a.createElement("h3",null,"Cost"),s.a.createElement("input",{className:"new-expense-form-input",id:"expenseCostInput",type:"number",name:"expenseCost",placeholder:"Ex. '9.99'",min:"0",onChange:v.handleInputChange.bind(this),onBlur:this.formatCost}),s.a.createElement("h3",null,"Members"),s.a.createElement(w,{num:1,newRow:this.createNewMemberRow,type:"expense",groupID:this.state.thisGroup._id}),s.a.createElement("div",{className:"newGroupMemberRow-spawn-here"})),s.a.createElement("div",{className:"popup-btn-container"},s.a.createElement("button",{className:"popup-create-btn",onClick:function(){return e.createExpense()}}," Create Expense "),s.a.createElement("button",{className:"popup-close-btn",onClick:function(t){return e.close(t,e.props.closePopup)}}," Close"))))}}]),t}(s.a.Component),z=(a(135),a(136)),Z=B()("http://localhost:5000"),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).createExpense=function(e){g.a.post("/g/".concat(a.state.id),JSON.stringify(e),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(t){e._id=t.data._id,e.date=t.data.date;var n=document.createElement("div");n.id="expense-id-".concat(e._id),document.querySelector(".group-main-content").appendChild(n),i.a.render(s.a.createElement(J,{msg:e,key:e._id,user:a.state.user,creator:a.state.user,update:a.updateSmallExpense,hideExpense:a.hideSmallExpense,admin:a.state.user.isAdmin||a.state.thisGroup.superusers.includes(a.state.user._id)||a.state.user._id===e.creatorID}),document.querySelector("#expense-id-".concat(e._id))),a.scrollToBottomOfChat();var r=s.a.createElement("div",{key:Object(x.a)(e),onClick:function(t){return a.scrollToExpense(t,e)}},s.a.createElement(R,{msg:e,avatarURL:a.state.usersOfMessages[e.creatorID].avatarURL})),o=document.createElement("div");o.className=Object(x.a)(e),document.querySelector(".group-col-other-ul").appendChild(o),i.a.render(r,document.querySelector("."+Object(x.a)(e))),Z.emit("send-chat-message",{message:e,user:a.state.user})})).catch((function(e){return console.log(e)}))},a.state={id:a.getGroupID(),thisGroup:void 0,user:void 0,groupTitle:"Loading...",groupInput:"",showPopup:!1,groupMemberAddInput:"",addingMember:!1,usersOfMessages:void 0,loadingMe:!0,groupMembers:[],loadingMembers:!0,groupMessages:[],loadingMessages:!0,otherGroups:[],loadingOtherGroups:!0},a.getInput=a.getInput.bind(Object(f.a)(a)),a.addMember=a.addMember.bind(Object(f.a)(a)),a.toggleAddUser=a.toggleAddUser.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("/api/g/".concat(this.state.id)).then((function(t){if(t.data.deleted)throw new Error("Cannot enter a deleted group.");e.setState({thisGroup:t.data,groupTitle:t.data.name})})).catch((function(e){console.log(e),window.location="/403"})),g.a.get("/api/membersOf/".concat(this.state.id)).then((function(t){e.setState({groupMembers:t.data,loadingMembers:!1})})).catch((function(e){console.log(e),window.location="/403"})),g.a.get("/api/gm/".concat(this.state.id)).then((function(t){var a=Object.values(t.data).filter((function(e){return e.hasOwnProperty("creatorID")}));e.setState({groupMessages:a,usersOfMessages:t.data,loadingMessages:!1},(function(){setTimeout((function(){e.scrollToBottomOfChat()}),500)}))})).catch((function(e){console.log(e),window.location="/403"})),g.a.get("/api/groupsExcept/".concat(this.state.id)).then((function(t){e.setState({otherGroups:t.data,loadingOtherGroups:!1})})).catch((function(e){console.log(e),window.location="/403"})),g.a.get("/api/me").then((function(t){e.setState({user:t.data,loadingMe:!1},(function(){e.initSocket()}))})).catch((function(e){console.log(e),window.location="/403"}))}},{key:"initSocket",value:function(){var e=this;Z.emit("new-user",{user:this.state.user,group:this.state.thisGroup}),Z.emit("create",this.state.thisGroup._id),Z.on("user-joined",(function(t){e.createChatNotification("".concat(t.displayName," is now online"))})),Z.on("user-disconnected",(function(t){e.createChatNotification("".concat(t," is now offline"))})),Z.on("chat-message-delete",(function(t){t.requestor._id!==e.state.user._id&&(document.querySelector(".msg-id-"+t.message._id).style.display="none",t.message.isMsg||(document.querySelector(".expense-small-id-"+t.message._id).style.display="none"))})),Z.on("chat-message",(function(t){var a=t.message,n=document.createElement("div");n.className="newmsg-"+a._id,document.querySelector(".group-main-content").appendChild(n),i.a.render(s.a.createElement(J,{admin:e.state.user.isAdmin||e.state.thisGroup.superusers.includes(e.state.user._id)||e.state.user._id===a.creatorID,user:e.state.user,creator:t.user,msg:a,key:a._id}),document.querySelector(".newmsg-"+a._id)),e.scrollToBottomOfChat()}))}},{key:"createChatNotification",value:function(e){var t=this,a=document.createElement("div");a.className="online-alert newmsg-"+Date.now(),a.innerText="".concat(e," - ").concat(z(new Date,"dddd, mmmm dS, yyyy, h:MM:ss TT")),document.querySelector(".group-main-content").appendChild(a),setTimeout((function(){t.scrollToBottomOfChat()}),100)}},{key:"togglePopup",value:function(){this.setState({showPopup:!this.state.showPopup})}},{key:"scrollToBottomOfChat",value:function(){var e=document.querySelector(".group-main-content");e.scrollTop=e.scrollHeight}},{key:"getGroupID",value:function(){return this.props.match.params.group_number}},{key:"getInput",value:function(e){var t=this,a=this.state.groupInput;if((13===e.keyCode||e.target===document.querySelector(".group-main-send-btn")||e.target===document.querySelector(".fa-paper-plane"))&&""!==a){var n={groupID:this.state.id,isMsg:!0,creatorID:this.state.user._id,content:a,expense:void 0};document.querySelector("#group-input").value="",this.setState({groupInput:""}),g.a.post("/g/".concat(this.state.id),JSON.stringify(n),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(e){console.log("Posted message to group"),n._id=e.data._id,n.date=e.data.date;var a=document.createElement("div");a.className="newmsg-"+n._id,document.querySelector(".group-main-content").appendChild(a),i.a.render(s.a.createElement(J,{admin:t.state.user.isAdmin||t.state.thisGroup.superusers.includes(t.state.user._id)||t.state.user._id===n.creatorID,user:t.state.user,creator:t.state.user,msg:n,key:n._id}),document.querySelector(".newmsg-"+n._id)),t.scrollToBottomOfChat(),Z.emit("send-chat-message",{message:n,user:t.state.user})})).catch((function(e){return console.log(e)}))}}},{key:"addMember",value:function(e){var t=this,a=void 0;"group-add-member-accept-btn"!==e.target.id&&13!==e.keyCode||g.a.get("/api/g/".concat(this.state.id)).then((function(e){return t.setState({thisGroup:e.data}),g.a.get("/api/username/".concat(t.state.groupMemberAddInput))})).then((function(e){if(a=e.data,t.state.thisGroup.memberIDs.includes(a._id))throw new Error("That user is already in this group");return g.a.post("/g/".concat(t.state.thisGroup._id,"/user/").concat(t.state.groupMemberAddInput))})).then((function(e){var n=document.createElement("div");n.className="group-member-".concat(a._id),document.querySelector(".group-generated-members").appendChild(n),i.a.render(s.a.createElement(H,{member:a,group:t.state.thisGroup,admin:t.state.user.isAdmin||t.state.thisGroup.superusers.includes(t.state.user._id),isSuper:!1}),document.querySelector(".group-member-".concat(a._id)))})).catch((function(e){return console.log(e)})).finally((function(){document.querySelector("#group-add-member-input").value=""}))}},{key:"toggleAddUser",value:function(){var e=document.querySelector(".group-add-member-input-container"),t=document.querySelector(".group-add-member-container");this.state.addingMember?(e.style.display="none",t.style.display="block"):(e.style.display="block",t.style.display="none"),this.setState({addingMember:!this.state.addingMember})}},{key:"scrollToExpense",value:function(e,t){document.querySelector("#group-main-profile-pic-id-"+t._id).scrollIntoView()}},{key:"updateSmallExpense",value:function(e,t){document.querySelector(".expense-small-id-"+e+" p").innerText="$".concat(t," remaining")}},{key:"hideSmallExpense",value:function(e){document.querySelector(".expense-small-id-"+e).style.display="none"}},{key:"render",value:function(){var e=this,t=this.state,a=t.groupMembers,n=t.groupMessages,r=t.otherGroups,i=this.state,o=i.loadingMe,c=i.loadingMembers,l=i.loadingMessages,m=i.loadingOtherGroups;return s.a.createElement("div",null,s.a.createElement(y,{user:"admin"}),o||c||l||m?s.a.createElement(j,null):null,s.a.createElement("div",{className:"group-container"},s.a.createElement("div",{className:"group-col group-members-col"},s.a.createElement("div",{className:"group-members-div"},s.a.createElement("div",{className:"group-generated-members"},this.state.loadingMembers||this.state.loadingMe?"Loading Members...":a.map((function(t){return s.a.createElement(H,{member:t,key:t._id,isSuper:e.state.thisGroup.superusers.includes(t._id),group:e.state.thisGroup,admin:e.state.user.isAdmin||e.state.thisGroup.superusers.includes(e.state.user._id)})}))),s.a.createElement("div",{className:"group-add-member-container"},s.a.createElement("div",{className:"group-add-member-inner",onClick:this.toggleAddUser},s.a.createElement("div",{className:"group-add-member-btn"},s.a.createElement("i",{className:"fa fa-plus"})))),s.a.createElement("div",{className:"group-add-member-input-container"},s.a.createElement("input",{id:"group-add-member-input",type:"text",name:"groupMemberAddInput",placeholder:"Enter Username",onChange:v.handleInputChange.bind(this),maxLength:"150",onKeyDown:this.addMember}),s.a.createElement("i",{className:"fa fa-check",id:"group-add-member-accept-btn",onClick:this.addMember}),s.a.createElement("div",{className:"group-add-member-cancel-btn",onClick:this.toggleAddUser}," Cancel ")))),s.a.createElement("div",{className:"group-col group-main-col"},s.a.createElement("div",null,s.a.createElement("div",{className:"group-title"},this.state.groupTitle),s.a.createElement("div",{className:"group-main-add-btn"},s.a.createElement("button",{onClick:this.togglePopup.bind(this)}," ",s.a.createElement("i",{className:"fa fa-plus"})," New Expense"),this.state.showPopup?s.a.createElement(W,{addExpense:this.createExpense,closePopup:this.togglePopup.bind(this),groupMembers:this.state.groupMembers,group:this.state.thisGroup,user:this.state.user,admin:this.state.user.isAdmin||this.state.thisGroup.superusers.includes(this.state.user._id)}):null)),s.a.createElement("div",{className:"group-main-content"},this.state.loadingMessages||this.state.loadingMe?"Loading Messages...":n.map((function(t){return s.a.createElement(J,{msg:t,key:t._id,user:e.state.user,creator:e.state.usersOfMessages[t.creatorID],update:e.updateSmallExpense,hideExpense:e.hideSmallExpense,admin:e.state.user.isAdmin||e.state.thisGroup.superusers.includes(e.state.user._id)||e.state.user._id===t.creatorID})}))),s.a.createElement("div",{className:"group-input-container"},s.a.createElement("input",{id:"group-input",type:"text",name:"groupInput",placeholder:"Type something...",onChange:v.handleInputChange.bind(this),maxLength:"150",onKeyDown:this.getInput}),s.a.createElement("div",{className:"group-main-send-btn",onClick:this.getInput},s.a.createElement("i",{className:"fa fa-paper-plane"})))),s.a.createElement("div",{className:"group-col group-other-col"},s.a.createElement("div",{className:"other-title-expenses"},s.a.createElement("div",{className:"other-title"},s.a.createElement("h3",null,"Current Expenses")),s.a.createElement("ul",{className:"group-col-other-ul"},this.state.loadingMessages?"Loading Expenses...":n.filter((function(e){return!e.isMsg&&!e.expense.totalPaid})).map((function(t){return s.a.createElement("div",{key:t._id,onClick:function(a){return e.scrollToExpense(a,t)}},s.a.createElement(R,{msg:t,avatarURL:e.state.usersOfMessages[t.creatorID].avatarURL}))})))),s.a.createElement("div",{className:"other-title"},s.a.createElement("h3",null,"Other Groups")),s.a.createElement("ul",{className:"group-col-other-ul"},this.state.loadingOtherGroups?"Loading Other Groups...":r.map((function(e){return s.a.createElement(Y,{group:e,key:e._id})}))))))}}]),t}(s.a.Component),X=(a(137),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).toggleEdit=function(){a.state.editing?(a.setState({editing:!1}),document.querySelector("#profile-pic-"+a.state.id).style.backgroundImage="url('"+a.state.avatar+"')",a.patch()):a.setState({editing:!0})},a.state={id:a.getUserNum(),displayName:"",firstname:"",lastname:"",avatar:"",description:"",email:"",pref:"",paypal:"",editing:!1},a.toggleEdit=a.toggleEdit.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.getUserNum();g.a.get("/api/u/"+t).then((function(t){if(200===t.status){var a=t.data;e.setState({firstname:a.firstName,lastname:a.lastName,avatar:a.avatarURL,description:a.description,email:a.email,pref:a.preference,paypal:a.paypalURL,displayName:a.displayName}),document.querySelector("#profile-pic-"+e.state.id).style.backgroundImage="url('"+e.state.avatar+"')"}else e.props.history.push("/404")})).catch((function(t){e.props.history.push("/404")})),g.a.get("/api/me").then((function(e){(e.data._id===t||e.data.isAdmin)&&(document.querySelector(".profile-edit-btn").style.display="block")})).catch((function(e){console.log(e)}))}},{key:"patch",value:function(){g.a.patch("/u/".concat(this.state.id),JSON.stringify(this.state),{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(e){console.log(e)})).catch((function(e){console.log("Failed to patch: ".concat(e))}))}},{key:"getUserNum",value:function(){return this.props.match.params.user_number}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(y,null),this.state.editing?s.a.createElement("div",{className:"profile-btn profile-save-btn",onClick:this.toggleEdit},"Save ",s.a.createElement("i",{className:"fa fa-check"})):s.a.createElement("div",{className:"profile-btn profile-edit-btn",onClick:this.toggleEdit},"Edit ",s.a.createElement("i",{className:"fa fa-pencil"})),s.a.createElement("div",{className:"profile-container"},s.a.createElement("div",{className:"profile-pic-and-name"},s.a.createElement("div",{className:"profile-pic",id:"profile-pic-"+this.state.id}),s.a.createElement("div",{className:"profile-name-container"},s.a.createElement("h1",null,this.state.displayName," ",s.a.createElement("a",{href:"https://www."+this.state.paypal,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("i",{className:"fa fa-cc-paypal"}))),this.state.firstname," ",this.state.lastname),s.a.createElement("div",{className:"profile-desc"},s.a.createElement("b",null,"Description"),s.a.createElement("p",null,this.state.description),s.a.createElement("br",null),s.a.createElement("b",null,"Preferred Payment Method"),s.a.createElement("p",null,this.state.pref))),s.a.createElement("div",{className:"profile-info-container"},s.a.createElement("h3",null,"Email"),s.a.createElement("p",null,this.state.email)),this.state.editing?s.a.createElement("div",{className:"profile-edit-container"},s.a.createElement("form",{id:"profile-edit-form"},s.a.createElement("p",null,"First Name"),s.a.createElement("input",{type:"text",name:"firstname",onChange:v.handleInputChange.bind(this),defaultValue:this.state.firstname}),s.a.createElement("p",null,"Last Name"),s.a.createElement("input",{type:"text",name:"lastname",onChange:v.handleInputChange.bind(this),defaultValue:this.state.lastname}),s.a.createElement("p",null,"Avatar URL"),s.a.createElement("input",{type:"text",name:"avatar",onChange:v.handleInputChange.bind(this),defaultValue:this.state.avatar}),s.a.createElement("p",null,"Description"),s.a.createElement("input",{type:"text",name:"description",onChange:v.handleInputChange.bind(this),defaultValue:this.state.description}),s.a.createElement("p",null,"Preferred Payment Method"),s.a.createElement("input",{type:"text",name:"pref",onChange:v.handleInputChange.bind(this),defaultValue:this.state.pref}),s.a.createElement("p",null,"Email"),s.a.createElement("input",{type:"text",name:"email",onChange:v.handleInputChange.bind(this),defaultValue:this.state.email}),s.a.createElement("p",null,"PayPal URL"),s.a.createElement("input",{type:"text",name:"paypal",onChange:v.handleInputChange.bind(this),defaultValue:this.state.paypal}))):null))}}]),t}(s.a.Component)),ee=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"no-match"},s.a.createElement("h3",null,"Error 404"),s.a.createElement("a",{href:"/"},s.a.createElement("span",{role:"img","aria-label":"clap"},"click to return to home")))}}]),t}(s.a.Component),te=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"no-match"},s.a.createElement("h3",null,"Error 403"),s.a.createElement("a",{href:"/"},s.a.createElement("span",{role:"img","aria-label":"clap"},"click to return to home")))}}]),t}(s.a.Component),ae=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(u.a,null,s.a.createElement(d.c,null,s.a.createElement(d.a,{exact:!0,path:"/",component:_}),s.a.createElement(d.a,{exact:!0,path:"/groups",component:M}),s.a.createElement(d.a,{exact:!0,path:"/login",component:T}),s.a.createElement(d.a,{exact:!0,path:"/register",component:P}),s.a.createElement(d.a,{exact:!0,path:"/g/:group_number",component:Q}),s.a.createElement(d.a,{exact:!0,path:"/u/:user_number",component:X}),s.a.createElement(d.a,{exact:!0,path:"/403",component:te}),s.a.createElement(d.a,{component:ee}))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},61:function(e){e.exports=JSON.parse('[{"id":0,"username":"admin","password":"admin","picUrl":"https://api.adorable.io/avatars/200/0","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"e-transfer","description":"send me money please thank u :)"},{"id":1,"username":"user","password":"user","picUrl":"https://api.adorable.io/avatars/200/1","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":2,"username":"billy","password":"123","picUrl":"https://api.adorable.io/avatars/200/2","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":3,"username":"joe","password":"123","picUrl":"https://api.adorable.io/avatars/200/3","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":4,"username":"alfred","password":"123","picUrl":"https://api.adorable.io/avatars/200/4","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":5,"username":"sam","password":"123","picUrl":"https://api.adorable.io/avatars/200/5","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":6,"username":"alice","password":"123","picUrl":"https://api.adorable.io/avatars/200/6","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":7,"username":"emma","password":"123","picUrl":"https://api.adorable.io/avatars/200/7","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":8,"username":"anne","password":"123","picUrl":"https://api.adorable.io/avatars/200/8","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":9,"username":"joey","password":"123","picUrl":"https://api.adorable.io/avatars/200/9","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":10,"username":"bob","password":"123","picUrl":"https://api.adorable.io/avatars/200/10","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":11,"username":"timmy","password":"123","picUrl":"https://api.adorable.io/avatars/200/11","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":12,"username":"george","password":"123","picUrl":"https://api.adorable.io/avatars/200/12","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":13,"username":"margret","password":"123","picUrl":"https://api.adorable.io/avatars/200/13","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":14,"username":"jen","password":"123","picUrl":"https://api.adorable.io/avatars/200/14","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":15,"username":"paul","password":"123","picUrl":"https://api.adorable.io/avatars/200/15","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":16,"username":"rick","password":"123","picUrl":"https://api.adorable.io/avatars/200/16","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":17,"username":"donald","password":"123","picUrl":"https://api.adorable.io/avatars/200/17","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"im kinda epic....... xD"},{"id":18,"username":"daniel","password":"123","picUrl":"https://api.adorable.io/avatars/200/18","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},{"id":19,"username":"grace","password":"123","picUrl":"https://api.adorable.io/avatars/200/19","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"}]')},62:function(e){e.exports=JSON.parse("[]")},63:function(e){e.exports=JSON.parse('[{"id":0,"groupId":0,"date":0,"type":"msg","expense":{},"user":{"id":17,"username":"donald","password":"123","picUrl":"https://api.adorable.io/avatars/200/17","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname"},"content":"hey bad boys"},{"id":1,"groupId":0,"date":1,"type":"msg","expense":{},"user":{"id":17,"username":"donald","password":"123","picUrl":"https://api.adorable.io/avatars/200/17","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname"},"content":"thinkin about makin an expense later ;)"},{"id":2,"groupId":0,"date":123,"type":"msg","expense":{},"user":{"id":16,"username":"rick","password":"123","picUrl":"https://api.adorable.io/avatars/200/16","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname"},"content":"stop posting cringe"},{"id":3,"groupId":0,"date":1000,"type":"msg","expense":{},"user":{"id":17,"username":"donald","password":"123","picUrl":"https://api.adorable.io/avatars/200/17","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname"},"content":"ahah"},{"id":4,"groupId":0,"date":10001,"type":"msg","expense":{},"user":{"id":19,"username":"grace","password":"123","picUrl":"https://api.adorable.io/avatars/200/19","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname"},"content":"@george did u buy tp"},{"id":5,"groupId":0,"date":103,"type":"expense","expense":{"id":0,"title":"Toilet Paper","cost":9.99,"remaining":2.5,"members":[{"id":12,"username":"george","password":"123","picUrl":"https://api.adorable.io/avatars/200/12","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paid":true},{"id":19,"username":"grace","password":"123","picUrl":"https://api.adorable.io/avatars/200/19","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paid":true},{"id":17,"username":"donald","password":"123","picUrl":"https://api.adorable.io/avatars/200/17","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paid":true},{"id":1,"username":"user","password":"user","picUrl":"https://api.adorable.io/avatars/200/1","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paid":false}]},"user":{"id":12,"username":"george","password":"123","picUrl":"https://api.adorable.io/avatars/200/12","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},"content":"pay me back pls"},{"id":6,"groupId":0,"date":10001,"type":"msg","expense":{},"user":{"id":17,"username":"donald","password":"123","picUrl":"https://api.adorable.io/avatars/200/17","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname"},"content":"what the heck i don\'t use tp!!"},{"id":7,"groupId":0,"date":10001,"type":"msg","expense":{},"user":{"id":19,"username":"grace","password":"123","picUrl":"https://api.adorable.io/avatars/200/19","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname"},"content":"ok will pay soon"},{"id":8,"groupId":0,"date":104,"type":"expense","expense":{"id":1,"title":"Bread","cost":3.49,"remaining":2.79,"members":[{"id":16,"username":"rick","password":"123","picUrl":"https://api.adorable.io/avatars/200/16","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paid":true},{"id":19,"username":"grace","password":"123","picUrl":"https://api.adorable.io/avatars/200/19","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paid":false},{"id":17,"username":"donald","password":"123","picUrl":"https://api.adorable.io/avatars/200/17","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paid":false},{"id":18,"username":"daniel","password":"123","picUrl":"https://api.adorable.io/avatars/200/18","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paid":false}]},"user":{"id":16,"username":"rick","password":"123","picUrl":"https://api.adorable.io/avatars/200/16","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname","paypal":"https://www.paypal.me/chrismarcok","preference":"paypal","description":"send me money please thank u :)"},"content":"eyo i needed bread"},{"id":9,"groupId":6,"date":10000000000,"type":"msg","expense":{},"user":{"id":19,"username":"grace","password":"123","picUrl":"https://api.adorable.io/avatars/200/19","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname"},"content":"donald has been demoted to vice-bootlicker"},{"id":10,"groupId":6,"date":100000001000,"type":"msg","expense":{},"user":{"id":17,"username":"donald","password":"123","picUrl":"https://api.adorable.io/avatars/200/17","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname"},"content":"as you command it"},{"id":11,"groupId":0,"date":696969420,"type":"msg","expense":{},"user":{"id":17,"username":"donald","password":"123","picUrl":"https://api.adorable.io/avatars/200/17","email":"dummy@dummy.com","firstName":"Firstname","lastName":"McLastname"},"content":"EW ITS WHOLE GRAIN WTF!!!!!"}]')},68:function(e,t,a){e.exports=a(142)},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.32f8c85c.chunk.js.map